<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Network analysis | PyPi dependencies network</title>
<script src=https://cdn.tailwindcss.com></script><script src=https://unpkg.com/feather-icons></script><script src=https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js></script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><style type=text/tailwindcss>
    @layer base {
        body {
          @apply bg-gray-100;
          @apply font-sans;
          @apply leading-normal;
          @apply tracking-normal;
        }
        p {
          @apply py-6;
        }
        a {
          @apply text-green-500;
          @apply no-underline;
          @apply hover:underline;
        }
        h1 {
          @apply py-2;
          @apply font-sans;
          @apply text-2xl;
        }
        h2 {
          @apply py-2;
          @apply font-sans;
          @apply text-xl;
        }
        h3 {
          @apply py-2;
          @apply font-sans;
          @apply text-lg;
        }
        ol {
          @apply px-8;
          @apply list-decimal;
        }
        ul {
          @apply px-8;
          @apply list-disc;
        }
        blockquote {
          @apply border-l-4; 
          @apply border-green-500;
          @apply italic;
          @apply my-8;
          @apply pl-8;
          @apply md:pl-12;
        }
        pre {
          @apply bg-gray-900;
          @apply rounded;
          @apply text-white; 
          @apply font-mono;
          @apply text-base;
          @apply my-4;
          @apply p-2;
          @apply md:p-4;
        }
        table {
          @apply shadow-md;
          @apply rounded-lg;
          @apply m-auto;
          @apply my-8;
        }
        thead {
          @apply bg-gray-50;
        }
        th {
          @apply py-3;
          @apply px-6;
          @apply text-xs;
          @apply font-medium;
          @apply tracking-wider;
          @apply text-left;
          @apply text-gray-700;
          @apply uppercase;
        }
        tr {
          @apply bg-white;
          @apply border-b;
        }
        td {
          @apply py-4;
          @apply px-6;
          @apply text-sm;
          @apply font-medium;
          @apply text-gray-900;
          @apply whitespace-nowrap;
        }
        img {
          @apply m-auto;
          @apply object-cover;
        }
        .footer-icon {
          width: 64px; 
          height: 64px;
          @apply mx-4;
        }
      }
    </style></head><body><nav id=header class="fixed w-full z-10 top-0"><div id=progress class="h-1 z-20 top-0" style="background:linear-gradient(to right,#4dc0b5 var(--scroll),transparent 0)"></div><div class="w-full md:max-w-4xl mx-auto flex flex-wrap items-center justify-between mt-0 py-3"><div class=pl-4><a class="text-gray-900 text-base no-underline hover:no-underline font-extrabold text-xl" href=https://MathiasDamsgaard.github.io/Comp_Social_Sci_Webpage/>PyPi dependencies network</a></div><div class="block lg:hidden pr-4"><button id=nav-toggle class="flex items-center px-3 py-2 border rounded text-gray-500 border-gray-600 hover:text-gray-900 hover:border-green-500 appearance-none focus:outline-none"><svg class="fill-current h-3 w-3" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><title>Menu</title><path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"/></svg></button></div><div class="w-full flex-grow lg:flex lg:items-center lg:w-auto hidden lg:block mt-2 lg:mt-0 bg-gray-100 md:bg-transparent z-20" id=nav-content><ul class="list-reset lg:flex justify-end flex-1 items-center list-none px-0"><li><a class="inline-block py-2 px-4 text-gray-900 no-underline" href=../data-description>Data</a></li><li><a class="inline-block py-2 px-4 text-gray-900 no-underline" href=../network-analysis>Network</a></li><li><a class="inline-block py-2 px-4 text-gray-900 no-underline" href=../text-analysis>Text</a></li></ul></div></div></nav><div class="container w-full md:max-w-3xl mx-auto pt-20"><div class="w-full px-4 md:px-6 text-xl text-gray-800 leading-normal" style=font-family:Georgia,serif><div class=font-sans><h1 class="font-bold font-sans break-normal text-gray-900 pt-6 pb-2 text-3xl md:text-4xl">Network analysis</h1></div><p>The aim of our Network analysis was to find out if the PyPi network had any meaningfullnes in its structure, what the nature of the network is and if there&rsquo;s any significant nodes.</p><p>As mentioned in the description of the data the network is directed where a package points to its dependency.</p><p>Some basic statistics on the network (the largest weakly connect component in the whole network) are shown below:</p><pre tabindex=0><code>Number of nodes: 31,304
Log ( Number of nodes ): 10.35
Edges: 150,305
Network density: 0.00015
Average degree: 9.55
Median degree: 2.0
Mode degree: 1
Minimum degree: 1
Maximum degree: 3,527
</code></pre><p>The average number of dependencies a package has is 9.55, while most of the packages only have just 1 connection, and other packages are large hubs of thousands connections. Furthermore log(N) is higher than the average degree. This means that the network falls into to supercritical network regime.</p><p>To investigate if the PyPi network has meaningfullness it is advisable to generate a set of randomized graphs with the same underlying in- and out-degrees of each individual node in the network. This is to make sure that the calculated assortativity is not due to any structural features. Therefore, these rules were applied to the randomization.</p><ol><li>It should not have multilinks</li><li>It should not have self-loops</li><li>It should let the in- and out-degree stay the same during node swapping</li></ol><p>This randomization, also known as R-S randomization, was used to generate 50 simple random networks. The pseudocode is provided below:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>function degree_preserving_randomization( G ):
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Parameters:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    - G: A directed graph.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Returns:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    - G_rand: The degree-preserved randomized graph.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Create a copy of the graph</span>
</span></span><span style=display:flex><span>    G_rand <span style=color:#f92672>=</span> copy(G)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> each edge <span style=color:#f92672>in</span> G_rand <span style=color:#f92672>*</span> <span style=color:#ae81ff>10</span>:
</span></span><span style=display:flex><span>        <span style=color:#75715e># Select two sets of connected</span>
</span></span><span style=display:flex><span>        idx1, idx2 <span style=color:#f92672>=</span> random<span style=color:#f92672>.</span>sample(G_rand<span style=color:#f92672>.</span>index, <span style=color:#ae81ff>2</span>)
</span></span><span style=display:flex><span>        u, v <span style=color:#f92672>=</span> G_rand<span style=color:#f92672>.</span>edges[idx1]
</span></span><span style=display:flex><span>        x, y <span style=color:#f92672>=</span> G_rand<span style=color:#f92672>.</span>edges[idx2]
</span></span><span style=display:flex><span>        <span style=color:#75715e># Ensure distinct nodes</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> lenght(set([u, v, x, y])) <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>4</span>:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>continue</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Ensure that the new edges do not exist</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> x <span style=color:#f92672>not</span> <span style=color:#f92672>in</span> G_rand<span style=color:#f92672>.</span>neighbors(v) <span style=color:#f92672>and</span> y <span style=color:#f92672>not</span> <span style=color:#f92672>in</span> G_rand<span style=color:#f92672>.</span>neighbors(u):
</span></span><span style=display:flex><span>            G_rand<span style=color:#f92672>.</span>remove_edges_from([(u, v), (x, y)]) <span style=color:#75715e># Remove the old edges</span>
</span></span><span style=display:flex><span>            G_rand<span style=color:#f92672>.</span>add_edges_from([(u, y), (x, v)]) <span style=color:#75715e># Add the new edges</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> G_rand
</span></span></code></pre></div><p>Afterwards the assortativity was calculated for each of combination of in-out degree for each pair of nodes.
<strong>For a node pair where Node A points to Node B:</strong></p><ul><li>In degree of Node A and in degree of Node B: in-in</li><li>Out degree of Node A and in degree of Node B: out-in</li><li>In degree of Node A and out degree of Node B: in-out</li><li>Out degree of Node A and out degree of Node B out-out</li></ul><p>This gives the resulting plot:</p><img src=../images/Assortativity_lineplot_R_S.png width=800><p>The out-in assortativity of the random graphs show that there is some structural disassortativity in the graph structure, though this does not explain the even higher amount of disassortativity of out-in nodes.
The other types of assortativity appear to be neutral according to the random graphs. However, the out-out degree does also display some assortativity.</p><p>The plot shows that the random graphs are generelly distributed in the same way while the PyPi network is significantly different. Recall that there&rsquo;s 50 random models so it can be assumed that they would follow the central limit theorem. Their standard deviation is not high enough to encompass the PyPi network. I.e. the PyPi network is statistically significantly different from the random networks.</p><p>This means that the PyPi network dissplays very clear disassortativity in out-in degree.</p><p><strong>What are the implications of this?</strong></p><p>So in the case of the context of the PyPi network this means that when a package A with many dependencies is linked to a package B that package will generally have fewer packages depending on it. This can also be said in the reverse manner that a package A with many packages depending on it will be pointed on by a package with few dependencies.</p><p>A concrete example could be the package <em>numpy</em> which has about 3.500 packages depending on it. These packages will generally not be depending on many other packages. While some other package e.g. <em>jupyter-events</em> with only 17 packages depending on it, will be the dependency of packages, which depend on more packages. So these 17 packages will depend on more packages.</p><p>Also there has been done some interesting analysis in the explainer notebook on degree correlations in this directed graph. This can be read in the Network Analysis section here: <a href=https://github.com/MathiasDamsgaard/Comp_Social_Sci_Assignments/blob/main/Project.ipynb>Project.ipynb</a>.</p><hr><p>Additionally, it is also interesting to look at the relationship between closeness and degree of the nodes in the network:</p><img src=../images/Closeness_vs_Degree.png width=800><p>There is a linear relationship between closeness centrality and degree, meaning that the higher the degree of a node the closer it is to all other nodes. So to contextualize this, a package as <em>numpy</em> or <em>requests</em> which both have around 3.500 packages depending on them will both be very central and it would be easy to reach other nodes starting from these nodes.</p><hr><p>To conclude on the network analysis a comparison to the origininal analysis by <a href=https://kgullikson88.github.io/blog/pypi-analysis.html>Kevin Gullikson</a> will be made, looking at the distribution of the degree count on the top packages in the network. Considering the two plots below, it is clear that there definitely have been changes in the number of dependencies on the packages on PyPi over the last 8 years. Especially <strong>numpy, pandas and matplotlib</strong> have significantly increased and for <em>numpy</em> specifically it is approximately by 200%. On the other hand, a package as <em>six</em>, which is a compatibility library between Python 2 and 3, have barely changed at all. This change also makes sense, as machine learning and artificial intelligence have seen a big increase in popularity over the last couple of years. Lastly, <em>django</em> is no longer to be found. However, it is present in the network, so it is possible that its relevance in general have decreased.</p><img src=../images/Degree_comparison.png width=800><p>A sidenote is on the package <em>peppercorn</em>. It is a package that is the only requirement in a project called <a href=https://github.com/pypa/sampleproject><strong>sampleproject</strong></a>. Unfortuntely, many pacakges link to this repository on their PyPi page. We still included the packages for the additional degree distibution relevance they could have, but in this case the package can be ignore.</p><hr class="border-b-2 border-gray-400 mt-8 mx-4"><div class="font-sans flex justify-between content-center px-4 pb-12"><div class=text-left><p><a href=../data-description class="break-normal text-base md:text-sm text-green-500 font-bold no-underline hover:underline">&lt;
Previous Page</a></p></div><div class=text-right><p><a href=../text-analysis class="break-normal text-base md:text-sm text-green-500 font-bold no-underline hover:underline">Next
Page ></a></p></div></div></div></div><footer class="bg-white border-t border-gray-400 shadow"><div class="container max-w-4xl mx-auto flex py-8"><div class="w-full mx-auto flex flex-col"><div class="flex w-full"><div class="px-8 mx-auto"><ul class="pt-3 list-none px-0 flex"><li><a class="text-gray-600 no-underline py-2" href=../explainer-notebook.html><i data-feather=file-text class=footer-icon></i></a></li><li><a class="text-gray-600 no-underline py-2" href=https://github.com/MathiasDamsgaard/Comp_Social_Sci_Assignments><i data-feather=github class=footer-icon></i></a></li><li><a class="text-gray-600 no-underline py-2" href="https://drive.google.com/drive/folders/1ds2DuMk6-3qzciHKSTfHVpAQfmKQm407?usp=sharing"><i data-feather=hard-drive class=footer-icon></i></a></li></ul></div></div><div class="w-full mx-auto text-center"><ul class="list-reset items-center text-md py-6 list-none flex"><li class=mx-auto><p class="inline-block text-gray-600 mx-4 font-semibold capitalized">Andreas Søndergaard (s214635)</p></li><li class=mx-auto><p class="inline-block text-gray-600 mx-4 font-semibold capitalized">Anton Mosquera Storgaard (s214611)</p></li><li class=mx-auto><p class="inline-block text-gray-600 mx-4 font-semibold capitalized">Mathias Correll Damsgaard (s214647)</p></li></ul></div></div></div></footer><script>var h=document.documentElement,b=document.body,st="scrollTop",sh="scrollHeight",progress=document.querySelector("#progress"),scroll,scrollpos=window.scrollY,header=document.getElementById("header"),navcontent=document.getElementById("nav-content");document.addEventListener("scroll",function(){scroll=(h[st]||b[st])/((h[sh]||b[sh])-h.clientHeight)*100,progress.style.setProperty("--scroll",scroll+"%"),scrollpos=window.scrollY,scrollpos>10?(header.classList.add("bg-white"),header.classList.add("shadow"),navcontent.classList.remove("bg-gray-100"),navcontent.classList.add("bg-white")):(header.classList.remove("bg-white"),header.classList.remove("shadow"),navcontent.classList.remove("bg-white"),navcontent.classList.add("bg-gray-100"))}),document.getElementById("nav-toggle").onclick=function(){document.getElementById("nav-content").classList.toggle("hidden")},feather.replace()</script></body></html>